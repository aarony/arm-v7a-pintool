<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Pin: CONTROLLER</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<h1>CONTROLLER</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__LENGTH.html">CONTROLLER_LENGTH</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__START__ADDRESS.html">CONTROLLER_START_ADDRESS</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__STOP__ADDRESS.html">CONTROLLER_STOP_ADDRESS</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__FINI.html">CONTROLLER_FINI</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__SKIP.html">CONTROLLER_SKIP</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__UNIFORM.html">CONTROLLER_UNIFORM</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__INIT.html">CONTROLLER_INIT</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__PINPOINT.html">CONTROLLER_PINPOINT</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__MULTI.html">CONTROLLER_MULTI</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER__STATS__EVENT__ADDRESS.html">CONTROLLER_STATS_EVENT_ADDRESS</a></td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef VOID(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER.html#gc4dca38e842d15c271f007eb3b06f4a0">INSTLIB::CONTROL_HANDLER</a> )(<a class="el" href="group__CONTROLLER.html#g6332ed6d11224315cc6d15245c415fe2">CONTROL_EVENT</a>, VOID *, CONTEXT *, VOID *, VOID *)</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CONTROLLER.html#g6332ed6d11224315cc6d15245c415fe2">INSTLIB::CONTROL_EVENT</a> { <br>
&nbsp;&nbsp;<b>CONTROL_INVALID</b>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__CONTROLLER.html#gg6332ed6d11224315cc6d15245c415fe2460d1637e239873a8313a2d83ef338b2">INSTLIB::CONTROL_START</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__CONTROLLER.html#gg6332ed6d11224315cc6d15245c415fe20c88ce2ceef17811d97c2090aaaccb11">INSTLIB::CONTROL_STOP</a>
<br>
 }</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
It is often desirable to use instrumentation to observe an interval of the execution of a program. Controllers are used to detect the beginning or end of an interval. Some of the methods are instruction counts, or the nth time an address or symbol is executed.<p>
A controller is usually an ALARM with some coordination for stop and start and some built in command line switches.<p>
The example below can be found in InstLibExamples/control.C<p>
<div class="fragment"><pre class="fragment"><span class="comment">/*BEGIN_LEGAL </span>
<span class="comment">INTEL CONFIDENTIAL</span>
<span class="comment">Copyright 2002-2005 Intel Corporation All Rights Reserved.</span>
<span class="comment"></span>
<span class="comment">The source code contained or described herein and all documents</span>
<span class="comment">related to the source code (Material) are owned by Intel Corporation</span>
<span class="comment">or its suppliers or licensors. Title to the Material remains with</span>
<span class="comment">Intel Corporation or its suppliers and licensors. The Material may</span>
<span class="comment">contain trade secrets and proprietary and confidential information of</span>
<span class="comment">Intel Corporation and its suppliers and licensors, and is protected by</span>
<span class="comment">worldwide copyright and trade secret laws and treaty provisions. No</span>
<span class="comment">part of the Material may be used, copied, reproduced, modified,</span>
<span class="comment">published, uploaded, posted, transmitted, distributed, or disclosed in</span>
<span class="comment">any way without Intels prior express written permission.  No license</span>
<span class="comment">under any patent, copyright, trade secret or other intellectual</span>
<span class="comment">property right is granted to or conferred upon you by disclosure or</span>
<span class="comment">delivery of the Materials, either expressly, by implication,</span>
<span class="comment">inducement, estoppel or otherwise. Any license under such intellectual</span>
<span class="comment">property rights must be express and approved by Intel in writing.</span>
<span class="comment"></span>
<span class="comment">Unless otherwise agreed by Intel in writing, you may not remove or</span>
<span class="comment">alter this notice or any other notice embedded in Materials by Intel</span>
<span class="comment">or Intels suppliers or licensors in any way.</span>
<span class="comment">END_LEGAL */</span>
<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="preprocessor">#include "pin.H"</span>
<span class="preprocessor">#include "instlib.H"</span>

<span class="keyword">using namespace </span>INSTLIB;

<span class="comment">// Track the number of instructions executed</span>
ICOUNT icount;

<span class="comment">// Contains knobs and instrumentation to recognize start/stop points</span>
CONTROL control;

VOID Handler(<a class="code" href="group__CONTROLLER.html#g6332ed6d11224315cc6d15245c415fe2">CONTROL_EVENT</a> ev, VOID * v, CONTEXT * ctxt, VOID * ip, VOID * tid)
{
    std::cout &lt;&lt; <span class="stringliteral">"ip: "</span> &lt;&lt; ip &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; icount.Count() ;
<span class="preprocessor">#if defined(TARGET_IA32) || defined(TARGET_IA32E)</span>
<span class="preprocessor"></span>    std::cout &lt;&lt; <span class="stringliteral">" [ with REP iterations "</span> &lt;&lt; icount.CountWithREP() &lt;&lt; <span class="stringliteral">"] "</span>;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <span class="keywordflow">switch</span>(ev)
    {
      <span class="keywordflow">case</span> <a class="code" href="group__CONTROLLER.html#gg6332ed6d11224315cc6d15245c415fe2460d1637e239873a8313a2d83ef338b2">CONTROL_START</a>:
        std::cout &lt;&lt; <span class="stringliteral">"Start"</span> &lt;&lt; endl;
        <span class="keywordflow">break</span>;

      <span class="keywordflow">case</span> <a class="code" href="group__CONTROLLER.html#gg6332ed6d11224315cc6d15245c415fe20c88ce2ceef17811d97c2090aaaccb11">CONTROL_STOP</a>:
        std::cout &lt;&lt; <span class="stringliteral">"Stop"</span> &lt;&lt; endl;
        <span class="keywordflow">break</span>;

      <span class="keywordflow">default</span>:
        ASSERTX(<span class="keyword">false</span>);
        <span class="keywordflow">break</span>;
    }
}
    
INT32 Usage()
{
    cerr &lt;&lt;
        <span class="stringliteral">"This pin tool demonstrates use of CONTROL to identify start/stop points in a program\n"</span>
        <span class="stringliteral">"\n"</span>;

    cerr &lt;&lt; KNOB_BASE::StringKnobSummary() &lt;&lt; endl;
    <span class="keywordflow">return</span> -1;
}

<span class="comment">// argc, argv are the entire command line, including pin -t &lt;toolname&gt; -- ...</span>
<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[])
{
    <span class="keywordflow">if</span>( <a class="code" href="group__PIN__CONTROL.html#g783d3bd40c3fb2ca51b1f9af31a70c9c">PIN_Init</a>(argc,argv) )
    {
        <span class="keywordflow">return</span> Usage();
    }

    icount.Activate();
    
    <span class="comment">// Activate alarm, must be done before PIN_StartProgram</span>
    control.CheckKnobs(Handler, 0);

    <span class="comment">// Start the program, never returns</span>
    <a class="code" href="group__PIN__CONTROL.html#g70c7d6c2a0d8ddad7595cae915f9a9e7">PIN_StartProgram</a>();
    
    <span class="keywordflow">return</span> 0;
}


</pre></div> <hr><h2>Typedef Documentation</h2>
<a class="anchor" name="gc4dca38e842d15c271f007eb3b06f4a0"></a><!-- doxytag: member="INSTLIB::CONTROL_HANDLER" ref="gc4dca38e842d15c271f007eb3b06f4a0" args=")(CONTROL_EVENT, VOID *, CONTEXT *, VOID *, VOID *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef VOID(* <a class="el" href="group__CONTROLLER.html#gc4dca38e842d15c271f007eb3b06f4a0">INSTLIB::CONTROL_HANDLER</a>)(<a class="el" href="group__CONTROLLER.html#g6332ed6d11224315cc6d15245c415fe2">CONTROL_EVENT</a>, VOID *, CONTEXT *, VOID *, VOID *)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Type for generic event handler     </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="g6332ed6d11224315cc6d15245c415fe2"></a><!-- doxytag: member="INSTLIB::CONTROL_EVENT" ref="g6332ed6d11224315cc6d15245c415fe2" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="group__CONTROLLER.html#g6332ed6d11224315cc6d15245c415fe2">INSTLIB::CONTROL_EVENT</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Event that is passed to handler when controller detects the beginning or end of an interval <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg6332ed6d11224315cc6d15245c415fe2460d1637e239873a8313a2d83ef338b2"></a><!-- doxytag: member="CONTROL_START" ref="gg6332ed6d11224315cc6d15245c415fe2460d1637e239873a8313a2d83ef338b2" args="" -->CONTROL_START</em>&nbsp;</td><td>
Beginning of interval. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg6332ed6d11224315cc6d15245c415fe20c88ce2ceef17811d97c2090aaaccb11"></a><!-- doxytag: member="CONTROL_STOP" ref="gg6332ed6d11224315cc6d15245c415fe20c88ce2ceef17811d97c2090aaaccb11" args="" -->CONTROL_STOP</em>&nbsp;</td><td>
End of interval. </td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Fri Feb 23 14:20:22 2007 for Pin by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
